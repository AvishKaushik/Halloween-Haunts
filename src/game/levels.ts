import type { Level, Platform, Enemy, Collectible, PowerUp } from '../types/game';
import { CANVAS_HEIGHT, CANVAS_WIDTH } from '../utils/constants';

const createPlatform = (x: number, y: number, width: number, type: Platform['type'] = 'floating'): Platform => ({
  x,
  y,
  width,
  height: 20,
  type,
  broken: false,
});

const createEnemy = (x: number, y: number, type: Enemy['type'], patrolDistance: number = 100): Enemy => ({
  x,
  y,
  width: type === 'bat' ? 30 : 35,
  height: type === 'bat' ? 25 : 35,
  velocityX: 0,
  velocityY: 0,
  type,
  startX: x,
  patrolDistance,
  speed: type === 'bat' ? 3 : 2,
  direction: 1,
  health: type === 'witch' ? 2 : 1,
  isDead: false,
});

const createCollectible = (x: number, y: number, type: Collectible['type']): Collectible => ({
  x,
  y,
  width: 25,
  height: 25,
  type,
  collected: false,
  value: type === 'coin' ? 10 : type === 'candy' ? 25 : 50,
  bobOffset: 0,
});

const createPowerUp = (x: number, y: number, type: PowerUp['type']): PowerUp => ({
  x,
  y,
  width: 30,
  height: 30,
  type,
  collected: false,
  bobOffset: 0,
});

export const levels: Level[] = [
  // Level 1: Haunted Graveyard
  {
    id: 1,
    name: 'Haunted Graveyard',
    backgroundColor: '#0d001a',
    gravity: 0.5,
    finishX: 3950,
    platforms: [
      createPlatform(0, CANVAS_HEIGHT - 50, CANVAS_WIDTH * 5, 'ground'),
      createPlatform(200, 450, 150),
      createPlatform(450, 380, 120),
      createPlatform(650, 310, 150),
      createPlatform(900, 380, 120),
      createPlatform(1150, 450, 150),
      createPlatform(1400, 350, 180),
      createPlatform(1650, 280, 120),
      createPlatform(1850, 380, 150),
      createPlatform(2100, 450, 120),
      createPlatform(2350, 350, 150),
      createPlatform(2650, 280, 120),
      createPlatform(2900, 380, 180),
      createPlatform(3150, 450, 150),
      createPlatform(3450, 320, 120),
      createPlatform(3700, 250, 150),
    ],
    enemies: [
      createEnemy(350, 415, 'ghost', 120),
      createEnemy(550, 345, 'bat', 80),
      createEnemy(1050, 345, 'skeleton', 100),
      createEnemy(1500, 315, 'ghost', 150),
      createEnemy(1950, 345, 'bat', 100),
      createEnemy(2250, 415, 'skeleton', 120),
      createEnemy(2750, 245, 'bat', 100),
      createEnemy(3050, 345, 'ghost', 150),
      createEnemy(3550, 285, 'skeleton', 100),
    ],
    collectibles: [
      createCollectible(250, 420, 'coin'),
      createCollectible(280, 420, 'coin'),
      createCollectible(310, 420, 'coin'),
      createCollectible(520, 350, 'candy'),
      createCollectible(720, 280, 'pumpkin'),
      createCollectible(1000, 350, 'coin'),
      createCollectible(1200, 420, 'coin'),
      createCollectible(1230, 420, 'coin'),
      createCollectible(1500, 320, 'candy'),
      createCollectible(1720, 250, 'coin'),
      createCollectible(2000, 350, 'pumpkin'),
      createCollectible(2420, 320, 'coin'),
      createCollectible(2450, 320, 'coin'),
      createCollectible(2720, 250, 'candy'),
      createCollectible(3000, 350, 'coin'),
      createCollectible(3520, 290, 'pumpkin'),
      createCollectible(3770, 220, 'candy'),
    ],
    powerUps: [
      createPowerUp(700, 280, 'speed'),
      createPowerUp(1700, 250, 'doubleJump'),
      createPowerUp(2900, 350, 'invincibility'),
    ],
  },

  // Level 2: Spooky Forest
  {
    id: 2,
    name: 'Spooky Forest',
    backgroundColor: '#0a0f0a',
    gravity: 0.5,
    finishX: 3950,
    platforms: [
      createPlatform(0, CANVAS_HEIGHT - 50, CANVAS_WIDTH * 5, 'ground'),
      createPlatform(150, 480, 100),
      createPlatform(320, 420, 100),
      createPlatform(490, 360, 100),
      createPlatform(660, 300, 100),
      createPlatform(830, 240, 100),
      createPlatform(1050, 320, 150),
      createPlatform(1300, 400, 120, 'breakable'),
      createPlatform(1500, 320, 100),
      createPlatform(1700, 400, 150),
      createPlatform(1950, 320, 120),
      createPlatform(2200, 240, 100),
      createPlatform(2400, 340, 150),
      createPlatform(2700, 420, 120, 'breakable'),
      createPlatform(2950, 340, 100),
      createPlatform(3200, 260, 150),
      createPlatform(3450, 380, 120),
      createPlatform(3700, 300, 180),
    ],
    enemies: [
      createEnemy(250, 445, 'bat', 60),
      createEnemy(420, 385, 'zombie', 80),
      createEnemy(760, 265, 'witch', 100),
      createEnemy(1150, 285, 'ghost', 120),
      createEnemy(1400, 365, 'bat', 100),
      createEnemy(1600, 285, 'skeleton', 80),
      createEnemy(1800, 365, 'zombie', 120),
      createEnemy(2050, 285, 'witch', 100),
      createEnemy(2500, 305, 'ghost', 150),
      createEnemy(2800, 385, 'bat', 100),
      createEnemy(3100, 305, 'skeleton', 120),
      createEnemy(3550, 345, 'witch', 100),
    ],
    collectibles: [
      createCollectible(200, 450, 'coin'),
      createCollectible(370, 390, 'coin'),
      createCollectible(540, 330, 'candy'),
      createCollectible(710, 270, 'coin'),
      createCollectible(880, 210, 'pumpkin'),
      createCollectible(1150, 290, 'coin'),
      createCollectible(1180, 290, 'coin'),
      createCollectible(1550, 290, 'candy'),
      createCollectible(1800, 370, 'coin'),
      createCollectible(2000, 290, 'coin'),
      createCollectible(2250, 210, 'pumpkin'),
      createCollectible(2500, 310, 'coin'),
      createCollectible(2750, 390, 'candy'),
      createCollectible(3000, 310, 'coin'),
      createCollectible(3250, 230, 'coin'),
      createCollectible(3500, 350, 'pumpkin'),
    ],
    powerUps: [
      createPowerUp(660, 270, 'doubleJump'),
      createPowerUp(1700, 370, 'fireball'),
      createPowerUp(3200, 230, 'invincibility'),
    ],
  },

  // Level 3: Witch's Castle
  {
    id: 3,
    name: "Witch's Castle",
    backgroundColor: '#0f0a1a',
    gravity: 0.5,
    finishX: 3850,
    platforms: [
      createPlatform(0, CANVAS_HEIGHT - 50, CANVAS_WIDTH * 5, 'ground'),
      createPlatform(100, 480, 120),
      createPlatform(300, 420, 100),
      createPlatform(480, 360, 120),
      createPlatform(680, 420, 100, 'breakable'),
      createPlatform(850, 480, 120),
      createPlatform(1050, 400, 150),
      createPlatform(1280, 320, 100),
      createPlatform(1460, 240, 120),
      createPlatform(1660, 320, 150),
      createPlatform(1900, 400, 100, 'breakable'),
      createPlatform(2080, 480, 120),
      createPlatform(2300, 380, 150),
      createPlatform(2550, 280, 100),
      createPlatform(2750, 200, 120),
      createPlatform(2950, 280, 150),
      createPlatform(3200, 380, 120),
      createPlatform(3420, 300, 100),
      createPlatform(3620, 220, 180),
    ],
    enemies: [
      createEnemy(200, 445, 'skeleton', 100),
      createEnemy(380, 385, 'witch', 80),
      createEnemy(580, 325, 'ghost', 100),
      createEnemy(780, 385, 'bat', 80),
      createEnemy(950, 445, 'zombie', 100),
      createEnemy(1150, 365, 'witch', 120),
      createEnemy(1380, 285, 'skeleton', 80),
      createEnemy(1560, 205, 'bat', 100),
      createEnemy(1760, 285, 'witch', 120),
      createEnemy(2000, 365, 'ghost', 80),
      createEnemy(2180, 445, 'zombie', 100),
      createEnemy(2400, 345, 'witch', 150),
      createEnemy(2650, 245, 'bat', 80),
      createEnemy(2850, 165, 'skeleton', 100),
      createEnemy(3050, 245, 'witch', 120),
      createEnemy(3300, 345, 'ghost', 100),
      createEnemy(3520, 265, 'zombie', 80),
    ],
    collectibles: [
      createCollectible(150, 450, 'coin'),
      createCollectible(350, 390, 'candy'),
      createCollectible(530, 330, 'coin'),
      createCollectible(730, 390, 'coin'),
      createCollectible(900, 450, 'candy'),
      createCollectible(1150, 370, 'pumpkin'),
      createCollectible(1330, 290, 'coin'),
      createCollectible(1510, 210, 'candy'),
      createCollectible(1760, 290, 'coin'),
      createCollectible(1950, 370, 'coin'),
      createCollectible(2130, 450, 'candy'),
      createCollectible(2400, 350, 'pumpkin'),
      createCollectible(2600, 250, 'coin'),
      createCollectible(2800, 170, 'candy'),
      createCollectible(3000, 250, 'coin'),
      createCollectible(3250, 350, 'pumpkin'),
      createCollectible(3470, 270, 'coin'),
      createCollectible(3720, 190, 'candy'),
    ],
    powerUps: [
      createPowerUp(480, 330, 'speed'),
      createPowerUp(1460, 210, 'doubleJump'),
      createPowerUp(2750, 170, 'fireball'),
      createPowerUp(3620, 190, 'invincibility'),
    ],
  },
];
